<?xml version="1.0" encoding="utf-8"?>
<viewer:BaseWidget xmlns:fx="http://ns.adobe.com/mxml/2009"
				   xmlns:s="library://ns.adobe.com/flex/spark"
				   xmlns:esri="http://www.esri.com/2008/ags"
				   xmlns:mx="library://ns.adobe.com/flex/mx"
				   xmlns:viewer="com.esri.viewer.*"
				   layout="horizontal">

	<fx:Script>
		<![CDATA[
			import com.esri.ags.events.MapEvent;
			import com.esri.ags.geometry.Extent;
			import com.esri.ags.geometry.MapPoint;
			import com.esri.ags.utils.WebMercatorUtil;
			/* import com.esri.ags.utils. */
			
			import mx.formatters.NumberBaseRoundType;
			import mx.utils.StringUtil;
			
			
			// when mouse (cursor) is on the map ...
/* 			private function loadHandler():void
			{
				map.addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler);
				
			} */
			
			// ... show coordinates of current (mouse) location
			/* private function mouseMoveHandler(event:MouseEvent):void
			{
				const mapPoint:MapPoint = map.toMapFromStage(event.stageX, event.stageY);
				const latlong:MapPoint = WebMercatorUtil.webMercatorToGeographic(mapPoint) as MapPoint;
				mousecoords.text =
					"x,y is " + mapPoint.x.toFixed(0) + "," + mapPoint.y.toFixed(0)
					+ " and Lat/Long is: " + latlong.y.toFixed(6)
					+ " / " + latlong.x.toFixed(6);
			} */
			
			// convert current projected extent to geographic and show as such
			protected function showExtentInGeographic(extent:Extent):String
			{
				const geoExtent:Extent = WebMercatorUtil.webMercatorToGeographic(map.extent) as Extent;
				// return geoExtent.toString() + ".." ;
				return " " + geoExtent.xmin.toFixed(6)
					+ ", " + geoExtent.ymin.toFixed(6)
					+ ", " + geoExtent.xmax.toFixed(6)
					+ ", " + geoExtent.ymax.toFixed(6)
					+ "   (wkid: " + geoExtent.spatialReference.wkid + ")";
			}
		]]>
	</fx:Script>
	
<!--	<s:controlBarLayout>
		<s:VerticalLayout gap="10"
						  paddingBottom="7"
						  paddingLeft="10"
						  paddingRight="10"
						  paddingTop="7"/>
	</s:controlBarLayout>-->
	
	<!--<s:controlBarContent>
		<s:RichText width="100%">
			This sample demonstrates how to use event listeners on the
			mouse to display current information about the mouse location.
			The map's current extent and scale is also displayed as you
			change the extent by navigating the map (pan/zoom) or use the
			navigation slider to zoom in/out.
		</s:RichText>
		<s:HGroup>
			<s:Label fontWeight="bold" text="Current map extent:"/>
			<s:RichEditableText editable="false" text='xmin="{map.extent.xmin.toFixed(0)}" ymin="{map.extent.ymin.toFixed(0)}" xmax="{map.extent.xmax.toFixed(0)}" ymax="{map.extent.ymax.toFixed(0)}"   (wkid="{map.spatialReference.wkid}")'/>
		</s:HGroup>
		<s:HGroup>
			<s:Label fontWeight="bold" text="Current map extent (in geographic):"/>
			<s:RichEditableText editable="false" text="{showExtentInGeographic(map.extent)}"/>
		</s:HGroup>
		<s:HGroup>
			<s:Label fontWeight="bold" text="Current Mouse Coordinates:"/>
			<s:RichEditableText id="mousecoords"
								editable="false"
								text="Move the mouse over the map to see its current coordinates..."/>
		</s:HGroup>
		<s:HGroup>
			<s:Label fontWeight="bold" text="Current map scale is"/>
			<s:RichEditableText editable="false" text="1:{map.scale.toFixed(0)} (level {map.level})"/>
		</s:HGroup>
	</s:controlBarContent>-->
	
	<fx:Declarations>
		<mx:NumberFormatter id="numberFormatter"/>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<viewer:filters>
		<mx:GlowFilter alpha="1"
					   blurX="3"
					   blurY="3"
					   color="0xFFFFFF"
					   strength="7"/>
	</viewer:filters>
	<s:Label id="textscale" color="0x000000"/>
</viewer:BaseWidget>